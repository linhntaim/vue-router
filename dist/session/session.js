"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Session=/*#__PURE__*/function(){function Session(){_classCallCheck(this,Session);this.storeHandler=null;this.accessTime=0;this.nextAccessTime=1;this.data={}}/**
     *
     * @param {StoreHandler} storeHandler
     */_createClass(Session,[{key:"attachStoreHandler",value:function attachStoreHandler(storeHandler){this.storeHandler=storeHandler;return this.sync("save")}/**
     *
     * @param {StoreHandler} storeHandler
     */},{key:"fromStoreHandler",value:function fromStoreHandler(storeHandler){this.storeHandler=storeHandler;return this.sync()}/**
     *
     * @param {String|null} action
     */},{key:"sync",value:function sync(){var action=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!this.storeHandler)return this;if(action==="save"){this.storeHandler.setJson("__session",this.data)}else{var data=this.storeHandler.getJson("__session");if(data)this.data=data}return this}},{key:"start",value:function start(){this.nextAccessTime=++this.accessTime+1;return this}},{key:"restart",value:function restart(){this.accessTime=1;this.nextAccessTime=2;return this}},{key:"skip",value:function skip(){this.nextAccessTime=this.accessTime;return this}},{key:"abortSkipping",value:function abortSkipping(){this.nextAccessTime=this.accessTime+1;return this}},{key:"skipping",value:function skipping(){return this.nextAccessTime<=this.accessTime}},{key:"isFresh",value:function isFresh(){return this.accessTime===1}},{key:"isNotFresh",value:function isNotFresh(){return this.accessTime>1}},{key:"flash",value:function flash(key,value){return this.store(key,value,true)}},{key:"store",value:function store(key,value){var flash=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.data[key]={value:value,flash:flash};return this.sync("save")}},{key:"retrieve",value:function retrieve(key){var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!(key in this.data))return def;var data=this.data[key];if(data.flash){delete this.data[key]}return data.value}},{key:"forgot",value:function forgot(key){delete this.data[key];return this.sync("save")}}]);return Session}();exports["default"]=Session;
//# sourceMappingURL=session.js.map