"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Session=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Session=/*#__PURE__*/function(){function Session(){_classCallCheck(this,Session);this.storeHandler=null;this.storeHandlerKey=process.env.VUE_APP_SESSION_STORE_HANDLER_KEY?process.env.VUE_APP_SESSION_STORE_HANDLER_KEY:"__session";this.sequenceAccess=0;this.nextSequenceAccess=1;this.data={}}/**
     *
     * @param {StoreHandler} storeHandler
     */_createClass(Session,[{key:"toStoreHandler",value:function toStoreHandler(storeHandler){this.storeHandler=storeHandler;return this.syncTo()}/**
     *
     * @param {StoreHandler} storeHandler
     */},{key:"fromStoreHandler",value:function fromStoreHandler(storeHandler){this.storeHandler=storeHandler;return this.syncFrom()}},{key:"syncTo",value:function syncTo(){if(this.storeHandler){this.storeHandler.setJson(this.storeHandlerKey,this.data)}return this}},{key:"syncFrom",value:function syncFrom(){if(this.storeHandler){var data=this.storeHandler.getJson(this.storeHandlerKey);data&&(this.data=data)}return this}},{key:"start",value:function start(){return this.sequenceStart()}},{key:"restart",value:function restart(){return this.sequenceRestart()}},{key:"sequenceStart",value:function sequenceStart(){this.nextSequenceAccess=++this.sequenceAccess+1;return this}},{key:"sequenceRestart",value:function sequenceRestart(){this.sequenceAccess=1;this.nextSequenceAccess=2;return this}},{key:"sequenceSkip",value:function sequenceSkip(){this.nextSequenceAccess=this.sequenceAccess;return this}},{key:"sequenceAbortSkipping",value:function sequenceAbortSkipping(){this.nextSequenceAccess=this.sequenceAccess+1;return this}},{key:"sequenceSkipping",value:function sequenceSkipping(){return this.nextSequenceAccess<=this.sequenceAccess}},{key:"isFreshSequence",value:function isFreshSequence(){return this.sequenceAccess===1}},{key:"isNotFreshSequence",value:function isNotFreshSequence(){return this.sequenceAccess>1}},{key:"flash",value:function flash(key,value){return this.store(key,value,true)}},{key:"store",value:function store(key,value){var flash=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this.data[key]={value:value,flash:flash};return this.syncTo()}},{key:"retrieve",value:function retrieve(key){var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!(key in this.data))return def;var data=this.data[key];data.flash&&this.forget(key);return data.value}},{key:"forget",value:function forget(key){delete this.data[key];return this.syncTo()}}]);return Session}();exports.Session=Session;
//# sourceMappingURL=session.js.map